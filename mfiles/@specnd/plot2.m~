function plot2(D,varargin)
% plot 2D map of binned data

cBin = D.raw.axis.value(1:2);
% calculate bin edges
% bins with single element gets a +/- 0.5 width, done by adding a fake
% point at X(end)+1, then removing it in the end
for ii = 1:2
    if numel(cBin{ii}) == 1
        cBin
    cBin = cellfun(@(C)[C;C(end)+1],cBin,'UniformOutput',false);

eBin = cellfun(@(C)[(3*C(1)-C(2))/2; (C(1:end-1)+C(2:end))/2; (3*C(end)-C(end-1))/2],cBin,'UniformOutput',false);
% remove the additional element
eBin = cellfun(@(C)C(1:end-1),eBin,'UniformOutput',false);

[xx,yy] = ndgrid(eBin{:});

dat = D.raw.datcnt.value;
dat(isnan(dat)) = 0;

% add extra pad for surf plot
dat(end+1,:)=0;
dat(:,end+1) = 0;

surf(xx,yy,dat);
axis([eBin{1}([1 end])' eBin{2}([1 end])']);
view(2)

end